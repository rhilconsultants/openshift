<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=VeIFfpj9IqqkGQRjzdagvoskxxPf4zrOXex0HDuv2iN9cV9bUZ7wyyOLwBbBZJCuj8PlazIki3J4dESKvXwR77IvMkkUrPlJB0TDu9ieq24gasJ5l9Y7LtK6p5_KK0majeqPjWB0Q6qIHw_BcJQqMKyncXd3RsKv_kXJkx506TM');.lst-kix_n3kvfh5c5sox-4>li:before{content:"\0025cb  "}.lst-kix_n3kvfh5c5sox-5>li:before{content:"\0025a0  "}.lst-kix_sryvi1qtsqre-1>li:before{content:"\0025cb  "}.lst-kix_sryvi1qtsqre-2>li:before{content:"\0025a0  "}.lst-kix_n3kvfh5c5sox-1>li:before{content:"\0025cb  "}.lst-kix_n3kvfh5c5sox-2>li:before{content:"\0025a0  "}.lst-kix_n3kvfh5c5sox-3>li:before{content:"\0025cf  "}ol.lst-kix_ojvhzutzl7zv-6.start{counter-reset:lst-ctn-kix_ojvhzutzl7zv-6 0}.lst-kix_6z2a8aoqt4nu-8>li:before{content:"\0025a0  "}.lst-kix_sryvi1qtsqre-0>li:before{content:"\0025cf  "}.lst-kix_sryvi1qtsqre-8>li:before{content:"\0025a0  "}ol.lst-kix_ojvhzutzl7zv-3.start{counter-reset:lst-ctn-kix_ojvhzutzl7zv-3 0}.lst-kix_6z2a8aoqt4nu-5>li:before{content:"\0025a0  "}.lst-kix_6z2a8aoqt4nu-7>li:before{content:"\0025cb  "}.lst-kix_sryvi1qtsqre-7>li:before{content:"\0025cb  "}.lst-kix_6z2a8aoqt4nu-2>li:before{content:"\0025a0  "}.lst-kix_6z2a8aoqt4nu-6>li:before{content:"\0025cf  "}.lst-kix_sryvi1qtsqre-6>li:before{content:"\0025cf  "}.lst-kix_n3kvfh5c5sox-0>li:before{content:"\0025cf  "}.lst-kix_6z2a8aoqt4nu-3>li:before{content:"\0025cf  "}.lst-kix_sryvi1qtsqre-3>li:before{content:"\0025cf  "}.lst-kix_sryvi1qtsqre-5>li:before{content:"\0025a0  "}.lst-kix_6z2a8aoqt4nu-4>li:before{content:"\0025cb  "}.lst-kix_sryvi1qtsqre-4>li:before{content:"\0025cb  "}ul.lst-kix_lqri8elulwgp-0{list-style-type:none}ol.lst-kix_wi57dyc2k2gr-5.start{counter-reset:lst-ctn-kix_wi57dyc2k2gr-5 0}ul.lst-kix_lqri8elulwgp-2{list-style-type:none}ul.lst-kix_lqri8elulwgp-1{list-style-type:none}ul.lst-kix_lqri8elulwgp-4{list-style-type:none}ul.lst-kix_lqri8elulwgp-3{list-style-type:none}ul.lst-kix_lqri8elulwgp-6{list-style-type:none}ul.lst-kix_lqri8elulwgp-5{list-style-type:none}.lst-kix_6z2a8aoqt4nu-1>li:before{content:"\0025cb  "}ul.lst-kix_lqri8elulwgp-8{list-style-type:none}ul.lst-kix_lqri8elulwgp-7{list-style-type:none}.lst-kix_6z2a8aoqt4nu-0>li:before{content:"\0025cf  "}ul.lst-kix_6z2a8aoqt4nu-4{list-style-type:none}.lst-kix_hvp1svlmjhub-7>li:before{content:"\0025cb  "}ul.lst-kix_6z2a8aoqt4nu-5{list-style-type:none}ul.lst-kix_6z2a8aoqt4nu-6{list-style-type:none}ul.lst-kix_6z2a8aoqt4nu-7{list-style-type:none}ol.lst-kix_wi57dyc2k2gr-8.start{counter-reset:lst-ctn-kix_wi57dyc2k2gr-8 0}ul.lst-kix_6z2a8aoqt4nu-8{list-style-type:none}.lst-kix_hvp1svlmjhub-6>li:before{content:"\0025cf  "}ul.lst-kix_6z2a8aoqt4nu-0{list-style-type:none}.lst-kix_wi57dyc2k2gr-7>li{counter-increment:lst-ctn-kix_wi57dyc2k2gr-7}ul.lst-kix_6z2a8aoqt4nu-1{list-style-type:none}ul.lst-kix_6z2a8aoqt4nu-2{list-style-type:none}.lst-kix_hvp1svlmjhub-8>li:before{content:"\0025a0  "}ul.lst-kix_6z2a8aoqt4nu-3{list-style-type:none}ul.lst-kix_sryvi1qtsqre-0{list-style-type:none}ol.lst-kix_wi57dyc2k2gr-6.start{counter-reset:lst-ctn-kix_wi57dyc2k2gr-6 0}.lst-kix_wi57dyc2k2gr-0>li:before{content:"" counter(lst-ctn-kix_wi57dyc2k2gr-0,decimal) ". "}.lst-kix_ojvhzutzl7zv-7>li{counter-increment:lst-ctn-kix_ojvhzutzl7zv-7}ul.lst-kix_sryvi1qtsqre-8{list-style-type:none}ul.lst-kix_sryvi1qtsqre-7{list-style-type:none}ul.lst-kix_sryvi1qtsqre-6{list-style-type:none}ol.lst-kix_ojvhzutzl7zv-1.start{counter-reset:lst-ctn-kix_ojvhzutzl7zv-1 0}ul.lst-kix_sryvi1qtsqre-5{list-style-type:none}ul.lst-kix_sryvi1qtsqre-4{list-style-type:none}.lst-kix_wi57dyc2k2gr-0>li{counter-increment:lst-ctn-kix_wi57dyc2k2gr-0}ul.lst-kix_sryvi1qtsqre-3{list-style-type:none}ul.lst-kix_sryvi1qtsqre-2{list-style-type:none}ul.lst-kix_sryvi1qtsqre-1{list-style-type:none}.lst-kix_ojvhzutzl7zv-8>li{counter-increment:lst-ctn-kix_ojvhzutzl7zv-8}.lst-kix_wi57dyc2k2gr-6>li{counter-increment:lst-ctn-kix_wi57dyc2k2gr-6}ol.lst-kix_ojvhzutzl7zv-8.start{counter-reset:lst-ctn-kix_ojvhzutzl7zv-8 0}.lst-kix_ojvhzutzl7zv-1>li{counter-increment:lst-ctn-kix_ojvhzutzl7zv-1}ol.lst-kix_ojvhzutzl7zv-0.start{counter-reset:lst-ctn-kix_ojvhzutzl7zv-0 0}ul.lst-kix_n3kvfh5c5sox-0{list-style-type:none}ol.lst-kix_ojvhzutzl7zv-7.start{counter-reset:lst-ctn-kix_ojvhzutzl7zv-7 0}ul.lst-kix_n3kvfh5c5sox-1{list-style-type:none}ul.lst-kix_n3kvfh5c5sox-4{list-style-type:none}ul.lst-kix_n3kvfh5c5sox-5{list-style-type:none}ul.lst-kix_n3kvfh5c5sox-2{list-style-type:none}ul.lst-kix_n3kvfh5c5sox-3{list-style-type:none}ul.lst-kix_n3kvfh5c5sox-8{list-style-type:none}ol.lst-kix_wi57dyc2k2gr-0.start{counter-reset:lst-ctn-kix_wi57dyc2k2gr-0 0}ul.lst-kix_n3kvfh5c5sox-6{list-style-type:none}ul.lst-kix_n3kvfh5c5sox-7{list-style-type:none}.lst-kix_n3kvfh5c5sox-8>li:before{content:"\0025a0  "}.lst-kix_n3kvfh5c5sox-7>li:before{content:"\0025cb  "}.lst-kix_n3kvfh5c5sox-6>li:before{content:"\0025cf  "}.lst-kix_ojvhzutzl7zv-8>li:before{content:"" counter(lst-ctn-kix_ojvhzutzl7zv-8,lower-roman) ". "}ol.lst-kix_ojvhzutzl7zv-1{list-style-type:none}ol.lst-kix_wi57dyc2k2gr-4.start{counter-reset:lst-ctn-kix_wi57dyc2k2gr-4 0}ol.lst-kix_ojvhzutzl7zv-0{list-style-type:none}.lst-kix_ojvhzutzl7zv-5>li:before{content:"" counter(lst-ctn-kix_ojvhzutzl7zv-5,lower-roman) ". "}.lst-kix_ojvhzutzl7zv-7>li:before{content:"" counter(lst-ctn-kix_ojvhzutzl7zv-7,lower-latin) ". "}.lst-kix_wi57dyc2k2gr-3>li{counter-increment:lst-ctn-kix_wi57dyc2k2gr-3}.lst-kix_ojvhzutzl7zv-6>li:before{content:"" counter(lst-ctn-kix_ojvhzutzl7zv-6,decimal) ". "}ol.lst-kix_wi57dyc2k2gr-7{list-style-type:none}ol.lst-kix_ojvhzutzl7zv-8{list-style-type:none}ol.lst-kix_wi57dyc2k2gr-8{list-style-type:none}ol.lst-kix_ojvhzutzl7zv-7{list-style-type:none}ol.lst-kix_wi57dyc2k2gr-5{list-style-type:none}ol.lst-kix_ojvhzutzl7zv-6{list-style-type:none}ol.lst-kix_wi57dyc2k2gr-6{list-style-type:none}ol.lst-kix_ojvhzutzl7zv-5{list-style-type:none}ol.lst-kix_ojvhzutzl7zv-4{list-style-type:none}ol.lst-kix_ojvhzutzl7zv-3{list-style-type:none}ol.lst-kix_ojvhzutzl7zv-2{list-style-type:none}ol.lst-kix_wi57dyc2k2gr-0{list-style-type:none}.lst-kix_ov9o0uu2i9mh-5>li:before{content:"\0025a0  "}ol.lst-kix_wi57dyc2k2gr-7.start{counter-reset:lst-ctn-kix_wi57dyc2k2gr-7 0}.lst-kix_ov9o0uu2i9mh-4>li:before{content:"\0025cb  "}.lst-kix_ojvhzutzl7zv-4>li{counter-increment:lst-ctn-kix_ojvhzutzl7zv-4}ol.lst-kix_wi57dyc2k2gr-3{list-style-type:none}ol.lst-kix_wi57dyc2k2gr-4{list-style-type:none}ol.lst-kix_wi57dyc2k2gr-1{list-style-type:none}ol.lst-kix_wi57dyc2k2gr-2{list-style-type:none}.lst-kix_lqri8elulwgp-0>li:before{content:"\0025cf  "}.lst-kix_lqri8elulwgp-2>li:before{content:"\0025a0  "}ol.lst-kix_ojvhzutzl7zv-5.start{counter-reset:lst-ctn-kix_ojvhzutzl7zv-5 0}.lst-kix_ov9o0uu2i9mh-6>li:before{content:"\0025cf  "}.lst-kix_ov9o0uu2i9mh-7>li:before{content:"\0025cb  "}ol.lst-kix_ojvhzutzl7zv-2.start{counter-reset:lst-ctn-kix_ojvhzutzl7zv-2 0}.lst-kix_ov9o0uu2i9mh-8>li:before{content:"\0025a0  "}.lst-kix_lqri8elulwgp-1>li:before{content:"\0025cb  "}.lst-kix_ojvhzutzl7zv-5>li{counter-increment:lst-ctn-kix_ojvhzutzl7zv-5}.lst-kix_ojvhzutzl7zv-2>li{counter-increment:lst-ctn-kix_ojvhzutzl7zv-2}.lst-kix_wi57dyc2k2gr-5>li:before{content:"" counter(lst-ctn-kix_wi57dyc2k2gr-5,lower-roman) ". "}.lst-kix_wi57dyc2k2gr-3>li:before{content:"" counter(lst-ctn-kix_wi57dyc2k2gr-3,decimal) ". "}.lst-kix_wi57dyc2k2gr-4>li:before{content:"" counter(lst-ctn-kix_wi57dyc2k2gr-4,lower-latin) ". "}ol.lst-kix_wi57dyc2k2gr-1.start{counter-reset:lst-ctn-kix_wi57dyc2k2gr-1 0}.lst-kix_wi57dyc2k2gr-1>li:before{content:"" counter(lst-ctn-kix_wi57dyc2k2gr-1,lower-latin) ". "}.lst-kix_wi57dyc2k2gr-1>li{counter-increment:lst-ctn-kix_wi57dyc2k2gr-1}.lst-kix_wi57dyc2k2gr-2>li:before{content:"" counter(lst-ctn-kix_wi57dyc2k2gr-2,lower-roman) ". "}.lst-kix_wi57dyc2k2gr-4>li{counter-increment:lst-ctn-kix_wi57dyc2k2gr-4}ul.lst-kix_hvp1svlmjhub-1{list-style-type:none}ul.lst-kix_hvp1svlmjhub-2{list-style-type:none}ul.lst-kix_hvp1svlmjhub-0{list-style-type:none}.lst-kix_hvp1svlmjhub-2>li:before{content:"\0025a0  "}.lst-kix_hvp1svlmjhub-3>li:before{content:"\0025cf  "}.lst-kix_hvp1svlmjhub-5>li:before{content:"\0025a0  "}.lst-kix_hvp1svlmjhub-4>li:before{content:"\0025cb  "}.lst-kix_lqri8elulwgp-7>li:before{content:"\0025cb  "}.lst-kix_lqri8elulwgp-8>li:before{content:"\0025a0  "}.lst-kix_wi57dyc2k2gr-6>li:before{content:"" counter(lst-ctn-kix_wi57dyc2k2gr-6,decimal) ". "}.lst-kix_lqri8elulwgp-6>li:before{content:"\0025cf  "}.lst-kix_wi57dyc2k2gr-7>li:before{content:"" counter(lst-ctn-kix_wi57dyc2k2gr-7,lower-latin) ". "}.lst-kix_wi57dyc2k2gr-8>li:before{content:"" counter(lst-ctn-kix_wi57dyc2k2gr-8,lower-roman) ". "}.lst-kix_lqri8elulwgp-3>li:before{content:"\0025cf  "}.lst-kix_lqri8elulwgp-4>li:before{content:"\0025cb  "}.lst-kix_hvp1svlmjhub-1>li:before{content:"\0025cb  "}.lst-kix_lqri8elulwgp-5>li:before{content:"\0025a0  "}.lst-kix_hvp1svlmjhub-0>li:before{content:"\0025cf  "}ol.lst-kix_wi57dyc2k2gr-2.start{counter-reset:lst-ctn-kix_wi57dyc2k2gr-2 0}.lst-kix_ov9o0uu2i9mh-2>li:before{content:"\0025a0  "}.lst-kix_wi57dyc2k2gr-5>li{counter-increment:lst-ctn-kix_wi57dyc2k2gr-5}.lst-kix_wi57dyc2k2gr-2>li{counter-increment:lst-ctn-kix_wi57dyc2k2gr-2}.lst-kix_ov9o0uu2i9mh-1>li:before{content:"\0025cb  "}.lst-kix_ov9o0uu2i9mh-3>li:before{content:"\0025cf  "}ul.lst-kix_ov9o0uu2i9mh-8{list-style-type:none}.lst-kix_ojvhzutzl7zv-3>li{counter-increment:lst-ctn-kix_ojvhzutzl7zv-3}ul.lst-kix_ov9o0uu2i9mh-7{list-style-type:none}.lst-kix_ov9o0uu2i9mh-0>li:before{content:"\0025cf  "}.lst-kix_ojvhzutzl7zv-0>li{counter-increment:lst-ctn-kix_ojvhzutzl7zv-0}.lst-kix_wi57dyc2k2gr-8>li{counter-increment:lst-ctn-kix_wi57dyc2k2gr-8}.lst-kix_ojvhzutzl7zv-1>li:before{content:"" counter(lst-ctn-kix_ojvhzutzl7zv-1,lower-latin) ". "}.lst-kix_ojvhzutzl7zv-3>li:before{content:"" counter(lst-ctn-kix_ojvhzutzl7zv-3,decimal) ". "}.lst-kix_ojvhzutzl7zv-0>li:before{content:"" counter(lst-ctn-kix_ojvhzutzl7zv-0,decimal) ". "}.lst-kix_ojvhzutzl7zv-4>li:before{content:"" counter(lst-ctn-kix_ojvhzutzl7zv-4,lower-latin) ". "}ol.lst-kix_wi57dyc2k2gr-3.start{counter-reset:lst-ctn-kix_wi57dyc2k2gr-3 0}ul.lst-kix_ov9o0uu2i9mh-6{list-style-type:none}.lst-kix_ojvhzutzl7zv-6>li{counter-increment:lst-ctn-kix_ojvhzutzl7zv-6}ul.lst-kix_ov9o0uu2i9mh-5{list-style-type:none}ul.lst-kix_ov9o0uu2i9mh-4{list-style-type:none}ul.lst-kix_hvp1svlmjhub-7{list-style-type:none}ul.lst-kix_ov9o0uu2i9mh-3{list-style-type:none}ul.lst-kix_hvp1svlmjhub-8{list-style-type:none}ul.lst-kix_ov9o0uu2i9mh-2{list-style-type:none}ol.lst-kix_ojvhzutzl7zv-4.start{counter-reset:lst-ctn-kix_ojvhzutzl7zv-4 0}ul.lst-kix_hvp1svlmjhub-5{list-style-type:none}ul.lst-kix_ov9o0uu2i9mh-1{list-style-type:none}ul.lst-kix_hvp1svlmjhub-6{list-style-type:none}ul.lst-kix_ov9o0uu2i9mh-0{list-style-type:none}ul.lst-kix_hvp1svlmjhub-3{list-style-type:none}.lst-kix_ojvhzutzl7zv-2>li:before{content:"" counter(lst-ctn-kix_ojvhzutzl7zv-2,lower-roman) ". "}ul.lst-kix_hvp1svlmjhub-4{list-style-type:none}ol{margin:0;padding:0}table td,table th{padding:0}.c1{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;background-color:#efefef;border-left-style:solid;border-bottom-width:1pt;width:513pt;border-top-color:#000000;border-bottom-style:solid}.c37{margin-left:-27pt;padding-top:0pt;padding-bottom:10pt;line-height:1.0;orphans:2;widows:2;text-align:left;margin-right:-27pt}.c34{padding-top:10pt;padding-bottom:0pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left;height:18pt}.c16{color:#383838;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Overpass";font-style:normal}.c15{margin-left:18pt;padding-top:3pt;padding-bottom:10pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c3{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Overpass";font-style:normal}.c7{color:#383838;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Overpass";font-style:normal}.c47{color:#ee0000;font-weight:500;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Red Hat Text";font-style:normal}.c10{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:17pt;font-family:"Overpass";font-style:normal}.c4{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Overpass";font-style:normal}.c64{margin-left:18pt;padding-top:3pt;padding-bottom:4pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c65{padding-top:0pt;padding-bottom:3pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c14{padding-top:18pt;padding-bottom:4pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c17{padding-top:0pt;padding-bottom:10pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c56{padding-top:5pt;padding-bottom:10pt;line-height:1.14;orphans:2;widows:2;text-align:left}.c23{padding-top:4pt;padding-bottom:10pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c55{padding-top:18pt;padding-bottom:4pt;line-height:1.14;orphans:2;widows:2;text-align:left}.c44{padding-top:10pt;padding-bottom:10pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c40{padding-top:10pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c41{padding-top:0pt;padding-bottom:12pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c43{padding-top:24pt;padding-bottom:6pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c26{padding-top:10pt;padding-bottom:10pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c0{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c5{padding-top:12pt;padding-bottom:12pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c59{padding-top:0pt;padding-bottom:10pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c28{color:#ee0000;text-decoration:none;vertical-align:baseline;font-size:36pt;font-style:normal}.c19{color:#ee0000;text-decoration:none;vertical-align:baseline;font-size:26pt;font-style:normal}.c20{color:#000000;text-decoration:none;vertical-align:baseline;font-size:17pt;font-style:normal}.c29{color:#ee0000;text-decoration:none;vertical-align:baseline;font-size:30pt;font-style:normal}.c49{background-color:#ffff00;font-weight:500;font-size:10pt;font-family:"Red Hat Text"}.c48{background-color:#ffff00;font-size:9pt;font-family:"Red Hat Text";font-weight:500}.c9{border-spacing:0;border-collapse:collapse;margin-right:auto}.c21{color:#000000;text-decoration:none;vertical-align:baseline;font-style:normal}.c50{color:#ff0000;font-weight:700;text-decoration:none;font-family:"Overpass"}.c33{-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline;text-decoration-skip-ink:none}.c38{padding-top:0pt;padding-bottom:10pt;line-height:1.15;text-align:left}.c2{font-family:"Overpass";color:#ff0000;font-weight:400}.c57{font-weight:400;font-size:11pt;font-family:"Red Hat Text"}.c46{vertical-align:baseline;font-size:11pt;font-style:normal}.c27{font-weight:700;font-size:18pt;font-family:"Overpass"}.c42{font-weight:700;font-size:23pt;font-family:"Overpass"}.c52{font-family:"Overpass";color:#ff0000;font-weight:700}.c63{font-size:9pt;font-family:"Red Hat Text";font-weight:500}.c22{background-color:#ffffff;max-width:468pt;padding:90pt 72pt 72pt 72pt}.c8{font-size:10pt;font-family:"Overpass";font-weight:400}.c30{font-weight:700;font-size:18pt;font-family:"Red Hat Text"}.c6{color:inherit;text-decoration:inherit}.c62{font-weight:700;font-family:"Overpass"}.c53{vertical-align:baseline;font-style:normal}.c61{color:#ee0000;font-size:18pt}.c11{font-weight:400;font-family:"Overpass"}.c51{padding:0;margin:0}.c18{margin-left:36pt;padding-left:0pt}.c31{font-size:12pt}.c54{height:18pt}.c24{font-style:italic}.c35{height:36pt}.c60{height:26pt}.c58{text-decoration:none}.c39{background-color:#efefef}.c13{height:0pt}.c36{page-break-after:avoid}.c25{font-size:17pt}.c12{height:11pt}.c32{font-size:14pt}.c45{height:71.2pt}.title{padding-top:10pt;color:#ee0000;font-size:48pt;padding-bottom:10pt;font-family:"Red Hat Display";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#ee0000;font-weight:500;font-size:18pt;padding-bottom:10pt;font-family:"Red Hat Display";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Red Hat Text"}p{margin:0;color:#000000;font-size:11pt;font-family:"Red Hat Text"}h1{padding-top:0pt;color:#ee0000;font-size:26pt;padding-bottom:3pt;font-family:"Red Hat Display";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:10pt;color:#000000;font-weight:700;font-size:18pt;padding-bottom:10pt;font-family:"Red Hat Text";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:0pt;color:#434343;font-size:14pt;padding-bottom:10pt;font-family:"Red Hat Text";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:0pt;color:#ee0000;font-weight:700;font-size:12pt;padding-bottom:10pt;font-family:"Red Hat Text";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:10pt;color:#000000;font-weight:700;font-size:10pt;padding-bottom:0pt;font-family:"Red Hat Text";line-height:1.1500000000000001;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Red Hat Text";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c22"><div><p class="c17"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 158.11px; height: 37.50px;"><img alt="" src="images/image2.jpg" style="width: 158.11px; height: 37.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></div><p class="c26 c36 title" id="h.66y4kqbj468a"><span class="c11 c28">Exercise 4</span></p><p class="c17 c36 subtitle" id="h.5u5ugok56gd6"><span class="c11">operator-sdk</span></p><p class="c17 c12"><span class="c21 c11 c31"></span></p><p class="c17"><span class="c21 c11 c32">Date : 19/04/2020</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 531.00px; height: 583.00px;"><img alt="" src="images/image1.png" style="width: 720.00px; height: 932.80px; margin-left: -189.00px; margin-top: -295.54px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c12 c59"><span class="c21 c11 c32"></span></p><hr style="page-break-before:always;display:none;"><p class="c44 c36 c12 title" id="h.n4cjyi9gv2e"><span class="c11 c29"></span></p><p class="c36 c44 title" id="h.9iysovqalrju"><span class="c29 c11">Contents</span></p><p class="c23"><span class="c16"><a class="c6" href="#h.n4zfkq3fn1ym">Operator-SDK</a></span><span class="c16">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c16"><a class="c6" href="#h.n4zfkq3fn1ym">2</a></span></p><p class="c15"><span class="c7"><a class="c6" href="#h.dwpc7cpnucwg">Download</a></span><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c7"><a class="c6" href="#h.dwpc7cpnucwg">2</a></span></p><p class="c15"><span class="c7"><a class="c6" href="#h.szaqif4kbza8">Operator-sdk</a></span><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c7"><a class="c6" href="#h.szaqif4kbza8">2</a></span></p><p class="c15"><span class="c7"><a class="c6" href="#h.xffftzjx6eee">Download the release binary</a></span><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c7"><a class="c6" href="#h.xffftzjx6eee">2</a></span></p><p class="c15"><span class="c7"><a class="c6" href="#h.gjkk945m9206">Verify the downloaded release binary</a></span><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c7"><a class="c6" href="#h.gjkk945m9206">2</a></span></p><p class="c15"><span class="c7"><a class="c6" href="#h.ec51dx7ekmth">Install the release binary in your PATH</a></span><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c7"><a class="c6" href="#h.ec51dx7ekmth">4</a></span></p><p class="c15"><span class="c7"><a class="c6" href="#h.b4w67nho163d">Removing the unneeded Role</a></span><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c7"><a class="c6" href="#h.b4w67nho163d">6</a></span></p><p class="c15"><span class="c7"><a class="c6" href="#h.qe2ilhrd9tgr">Build and run the Operator</a></span><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c7"><a class="c6" href="#h.qe2ilhrd9tgr">7</a></span></p><p class="c15"><span class="c7"><a class="c6" href="#h.nuoky3eutn7p">Ways to Run an Operator</a></span><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c7"><a class="c6" href="#h.nuoky3eutn7p">8</a></span></p><p class="c15"><span class="c7"><a class="c6" href="#h.yq39yrge7qj7">Building</a></span><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c7"><a class="c6" href="#h.yq39yrge7qj7">8</a></span></p><p class="c15"><span class="c7"><a class="c6" href="#h.yhh0g8gz0m4r">Modifying the Operator deploy manifest</a></span><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c7"><a class="c6" href="#h.yhh0g8gz0m4r">8</a></span></p><p class="c26"><span class="c16"><a class="c6" href="#h.igbc6hsp1u3h">Custom Variables</a></span><span class="c16">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c16"><a class="c6" href="#h.igbc6hsp1u3h">11</a></span></p><p class="c26"><span class="c16"><a class="c6" href="#h.ydm6ubpp2c2k">Accessing CR Fields</a></span><span class="c16">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c16"><a class="c6" href="#h.ydm6ubpp2c2k">12</a></span></p><p class="c15"><span class="c7"><a class="c6" href="#h.6u0ju6nxgumb">Removing Memcached from the cluster</a></span><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c7"><a class="c6" href="#h.6u0ju6nxgumb">12</a></span></p><p class="c26"><span class="c16"><a class="c6" href="#h.2l4d50rqt5t4">Head First</a></span><span class="c16">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c16"><a class="c6" href="#h.2l4d50rqt5t4">14</a></span></p><p class="c15"><span class="c7"><a class="c6" href="#h.pk4t96xljry">Task 1</a></span><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c7"><a class="c6" href="#h.pk4t96xljry">14</a></span></p><p class="c15"><span class="c7"><a class="c6" href="#h.ir0rcaspqie5">Task 2 (Optional)</a></span><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c7"><a class="c6" href="#h.ir0rcaspqie5">14</a></span></p><p class="c64"><span class="c7"><a class="c6" href="#h.93izf6f06j40">UBI Container with operator-sdk</a></span><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c7"><a class="c6" href="#h.93izf6f06j40">15</a></span></p><hr style="page-break-before:always;display:none;"><p class="c12 c38"><span class="c21 c11 c31"></span></p><h1 class="c36 c65" id="h.n4zfkq3fn1ym"><span class="c11">Operator-SDK</span></h1><p class="c17"><span class="c4">Until now we worked with containers , Ansible and the Ansible module for Kubernetes , now it&rsquo;s time to bring it all together </span></p><h2 class="c44 c36" id="h.dwpc7cpnucwg"><span class="c21 c27">Download</span></h2><p class="c17"><span class="c11">First let&rsquo;s make sure we have the UBI image (we know what it is now)</span></p><a id="t.801dc091a2a61b89eda20574d9d3ad5f0aad13f2"></a><a id="t.0"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8"># podman pull registry.infra.local:5000/ubi8/ubi-minimal</span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4 c39"></span></p><h2 class="c44 c36" id="h.szaqif4kbza8"><span class="c21 c27">Operator-sdk</span></h2><p class="c17"><span class="c4">&nbsp;Now we will install the latest Operator-sdk</span></p><p class="c17"><span class="c11">Go to : </span><span class="c33 c11"><a class="c6" href="https://www.google.com/url?q=https://github.com/operator-framework/operator-sdk/blob/master/doc/user/install-operator-sdk.md&amp;sa=D&amp;ust=1587642006373000">https://github.com/operator-framework/operator-sdk/blob/master/doc/user/install-operator-sdk.md</a></span></p><h2 class="c55" id="h.xffftzjx6eee"><span class="c10">Download the release binary</span></h2><p class="c56"><span class="c11">Set the release version variable:</span></p><a id="t.1df319348802643f0b9560dabd741938ec44157b"></a><a id="t.1"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c21 c8"># export RELEASE_VERSION=v0.16.0</span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4"></span></p><p class="c0"><span class="c4">Now download the GNU binary</span></p><p class="c0 c12"><span class="c21 c11 c31"></span></p><a id="t.7691a333dd57d42f72af2207d0485cb3e54e3ffd"></a><a id="t.2"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8"># </span><span class="c11">curl -LO</span><span class="c11"><a class="c6" href="https://www.google.com/url?q=https://github.com/operator-framework/operator-sdk/releases/download/$%257BRELEASE_VERSION%257D/operator-sdk-$%257BRELEASE_VERSION%257D-x86_64-linux-gnu&amp;sa=D&amp;ust=1587642006375000">&nbsp;</a></span><span class="c33 c11"><a class="c6" href="https://www.google.com/url?q=https://github.com/operator-framework/operator-sdk/releases/download/$%257BRELEASE_VERSION%257D/operator-sdk-$%257BRELEASE_VERSION%257D-x86_64-linux-gnu&amp;sa=D&amp;ust=1587642006376000">https://github.com/operator-framework/operator-sdk/releases/download/${RELEASE_VERSION}/operator-sdk-${RELEASE_VERSION}-x86_64-linux-gnu</a></span></p></td></tr></tbody></table><p class="c0 c12"><span class="c20 c11"></span></p><h2 class="c14" id="h.gjkk945m9206"><span class="c11 c25">Verify the downloaded release binary</span></h2><a id="t.a3769fef6b9ccdf7bb3e0ff09f44639c3f65752c"></a><a id="t.3"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8"># </span><span class="c11">&nbsp;curl -LO</span><span class="c11"><a class="c6" href="https://www.google.com/url?q=https://github.com/operator-framework/operator-sdk/releases/download/$%257BRELEASE_VERSION%257D/operator-sdk-$%257BRELEASE_VERSION%257D-x86_64-linux-gnu.asc&amp;sa=D&amp;ust=1587642006377000">&nbsp;</a></span><span class="c33 c11"><a class="c6" href="https://www.google.com/url?q=https://github.com/operator-framework/operator-sdk/releases/download/$%257BRELEASE_VERSION%257D/operator-sdk-$%257BRELEASE_VERSION%257D-x86_64-linux-gnu.asc&amp;sa=D&amp;ust=1587642006377000">https://github.com/operator-framework/operator-sdk/releases/download/${RELEASE_VERSION}/operator-sdk-${RELEASE_VERSION}-x86_64-linux-gnu.asc</a></span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4"></span></p><p class="c5"><span class="c11">To verify a release binary using the provided asc files, place the binary and corresponding asc file into the same directory and use the corresponding command:</span></p><a id="t.9215ae2bb1e228d35613898fb6c2b6e724e5d934"></a><a id="t.4"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8"># </span><span class="c4">&nbsp;gpg --verify operator-sdk-${RELEASE_VERSION}-x86_64-linux-gnu.asc</span></p></td></tr></tbody></table><p class="c5"><span class="c11">If you do not have the maintainers public key on your machine, you will get an error message similar to this:</span></p><a id="t.4ce8c3c6a0f4e8c89a45ddfae3a319ced67cd038"></a><a id="t.5"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c11"># </span><span class="c4">gpg --verify operator-sdk-${RELEASE_VERSION}-x86_64-apple-darwin.asc</span></p><p class="c0"><span class="c4">gpg: assuming signed data in &#39;operator-sdk-${RELEASE_VERSION}-x86_64-apple-darwin&#39;</span></p><p class="c0"><span class="c4">gpg: Signature made Fri Apr &nbsp;5 20:03:22 2019 CEST</span></p><p class="c0"><span class="c4">gpg: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;using RSA key &lt;KEY_ID&gt;</span></p><p class="c0"><span class="c4">gpg: Can&#39;t check signature: No public key</span></p><p class="c0 c12"><span class="c21 c8"></span></p></td></tr></tbody></table><p class="c5"><span class="c11">To download the key, use the following command, replacing $KEY_ID with the RSA key string provided in the output of the previous command: </span></p><a id="t.e33b2e05a0fe5ab806aa0311c5e9336d10a2c864"></a><a id="t.6"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8"># </span><span class="c4">&nbsp;gpg --recv-key &quot;$KEY_ID&quot;</span></p></td></tr></tbody></table><p class="c5 c12"><span class="c4"></span></p><p class="c5"><span class="c11">You&rsquo;ll need to specify a key server if one hasn&rsquo;t been configured. For example: </span></p><a id="t.f59befeb05c82cb628bee5d49371e99b49909fc5"></a><a id="t.7"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8"># </span><span class="c4">&nbsp;gpg --keyserver keyserver.ubuntu.com --recv-key &quot;$KEY_ID&quot;</span></p></td></tr></tbody></table><p class="c5 c12"><span class="c4"></span></p><p class="c0"><span class="c4">Now you should be able to verify the binary.</span></p><hr style="page-break-before:always;display:none;"><h2 class="c14 c54" id="h.pqhk5crsupd6"><span class="c10"></span></h2><h2 class="c14" id="h.ec51dx7ekmth"><span class="c11 c25">Install the release binary in your PATH</span></h2><a id="t.d1cd444558fb1e78257380f932c9673d2fab28b7"></a><a id="t.8"></a><table class="c9"><tbody><tr class="c45"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c4"># chmod +x operator-sdk-${RELEASE_VERSION}-x86_64-linux-gnu </span></p><p class="c0"><span class="c4"># mkdir -p ${HOME}/bin</span></p><p class="c0"><span class="c4"># cp operator-sdk-${RELEASE_VERSION}-x86_64-linux-gnu $HOME/bin/operator-sdk </span></p><p class="c0"><span class="c11"># rm -f operator-sdk-${RELEASE_VERSION}-x86_64-linux-gnu</span></p></td></tr></tbody></table><p class="c5 c12"><span class="c4"></span></p><p class="c5"><span class="c50 c25 c53">(Optional) </span></p><p class="c5"><span class="c10">Build a container with operator-sdk</span></p><p class="c17"><span class="c11">Now that we have the binary and the image let&rsquo;s bring them together and work from the pod<br></span><span class="c2 c32">TIP</span><span class="c4"><br>(Make the POD running first , then connect to the pod)</span></p><p class="c17"><span class="c11">&hellip;&hellip;&hellip;&hellip;.</span></p><p class="c5"><span class="c4">(working with in a pod will help us &hellip;)</span></p><p class="c5 c12"><span class="c4"></span></p><p class="c0"><span class="c21 c42">WorkFlow</span></p><p class="c5"><span class="c4">The SDK provides workflows to develop operators in Go, Ansible, or Helm. In this tutorial we will be focusing on Ansible.</span></p><p class="c5"><span class="c11">The following workflow is for a new </span><span class="c62">Ansible</span><span class="c4">&nbsp;operator:</span></p><ol class="c51 lst-kix_ojvhzutzl7zv-0 start" start="1"><li class="c5 c18"><span class="c4">Create a new operator project using the SDK Command Line Interface(CLI)</span></li><li class="c5 c18"><span class="c4">Write the reconciling logic for your object using ansible playbooks and roles</span></li><li class="c5 c18"><span class="c4">Use the SDK CLI to build and generate the operator deployment manifests</span></li><li class="c5 c18"><span class="c4">Optionally add additional CRD&rsquo;s using the SDK CLI and repeat steps 2 and 3</span></li></ol><p class="c5"><span class="c11">First lets create a project with our new tool We&rsquo;ll be building a</span><span class="c11"><a class="c6" href="https://www.google.com/url?q=https://memcached.org/&amp;sa=D&amp;ust=1587642006385000">&nbsp;</a></span><span class="c33 c11"><a class="c6" href="https://www.google.com/url?q=https://memcached.org/&amp;sa=D&amp;ust=1587642006385000">Memcached</a></span><span class="c11">&nbsp;Ansible Operator for the remainder of this tutorial :<br></span><span class="c52">(Change the user01 in both places to your username)</span></p><a id="t.3acc013b16816fd3de1ee34cdc32bd306c79f1ad"></a><a id="t.9"></a><table class="c9"><tbody><tr class="c35"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8"># </span><span class="c4">operator-sdk new user01memcached-operator --type=ansible --api-version=cache.example.com/v1alpha1 --kind=User01memcached</span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4"></span></p><p class="c0 c12"><span class="c4"></span></p><p class="c0"><span class="c11">Now let&rsquo;s look at the TREE of our new object :</span></p><a id="t.62df9558738df445d0e42b9a57caf7ed192fe011"></a><a id="t.10"></a><table class="c9"><tbody><tr class="c35"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8"># </span><span class="c4">tree ${USER}-memcached-operator</span></p><p class="c0"><span class="c4">${USER}-memcached-operator</span></p><p class="c0"><span class="c4">&#9500;&#9472;&#9472; build</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &#9500;&#9472;&#9472; Dockerfile</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &#9492;&#9472;&#9472; test-framework</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &nbsp; &nbsp; &#9500;&#9472;&#9472; ansible-test.sh</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &nbsp; &nbsp; &#9492;&#9472;&#9472; Dockerfile</span></p><p class="c0"><span class="c4">&#9500;&#9472;&#9472; deploy</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &#9500;&#9472;&#9472; crds</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &#9474; &nbsp; &#9500;&#9472;&#9472; cache_v1alpha1_memcached_crd.yaml</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &#9474; &nbsp; &#9492;&#9472;&#9472; cache_v1alpha1_memcached_cr.yaml</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &#9500;&#9472;&#9472; operator.yaml</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &#9500;&#9472;&#9472; role_binding.yaml</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &#9500;&#9472;&#9472; role.yaml</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &#9492;&#9472;&#9472; service_account.yaml</span></p><p class="c0"><span class="c4">&#9500;&#9472;&#9472; molecule</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &#9500;&#9472;&#9472; default</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &#9474; &nbsp; &#9500;&#9472;&#9472; asserts.yml</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &#9474; &nbsp; &#9500;&#9472;&#9472; molecule.yml</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &#9474; &nbsp; &#9500;&#9472;&#9472; playbook.yml</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &#9474; &nbsp; &#9492;&#9472;&#9472; prepare.yml</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &#9500;&#9472;&#9472; test-cluster</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &#9474; &nbsp; &#9500;&#9472;&#9472; molecule.yml</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &#9474; &nbsp; &#9492;&#9472;&#9472; playbook.yml</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &#9492;&#9472;&#9472; test-local</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &nbsp; &nbsp; &#9500;&#9472;&#9472; molecule.yml</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &nbsp; &nbsp; &#9500;&#9472;&#9472; playbook.yml</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &nbsp; &nbsp; &#9492;&#9472;&#9472; prepare.yml</span></p><p class="c0"><span class="c4">&#9500;&#9472;&#9472; roles</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &#9492;&#9472;&#9472; memcached</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &nbsp; &nbsp; &#9500;&#9472;&#9472; defaults</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &nbsp; &nbsp; &#9474; &nbsp; &#9492;&#9472;&#9472; main.yml</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &nbsp; &nbsp; &#9500;&#9472;&#9472; files</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &nbsp; &nbsp; &#9500;&#9472;&#9472; handlers</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &nbsp; &nbsp; &#9474; &nbsp; &#9492;&#9472;&#9472; main.yml</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &nbsp; &nbsp; &#9500;&#9472;&#9472; meta</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &nbsp; &nbsp; &#9474; &nbsp; &#9492;&#9472;&#9472; main.yml</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &nbsp; &nbsp; &#9500;&#9472;&#9472; README.md</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &nbsp; &nbsp; &#9500;&#9472;&#9472; tasks</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &nbsp; &nbsp; &#9474; &nbsp; &#9492;&#9472;&#9472; main.yml</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &nbsp; &nbsp; &#9500;&#9472;&#9472; templates</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &nbsp; &nbsp; &#9492;&#9472;&#9472; vars</span></p><p class="c0"><span class="c4">&#9474; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#9492;&#9472;&#9472; main.yml</span></p><p class="c0"><span class="c4">&#9492;&#9472;&#9472; watches.yaml17 directories, 25 files</span></p></td></tr></tbody></table><p class="c5"><span class="c11">Now let&rsquo;s change the directory :</span></p><a id="t.8def4580eca36790990ad47f203b78fddfc75986"></a><a id="t.11"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8"># </span><span class="c4">cd ${USER}-memcached-operator</span></p></td></tr></tbody></table><p class="c5"><span class="c4">To speed development of our Operator up, we can reuse an existing Role. We will install a Role from Ansible Galaxy into our Operator:</span></p><p class="c5"><span class="c33 c11"><a class="c6" href="https://www.google.com/url?q=https://galaxy.ansible.com/dymurray/memcached_operator_role&amp;sa=D&amp;ust=1587642006395000">dymurray.memcached_operator_role (galaxy.ansible.com)</a></span></p><p class="c5"><span class="c11">Run to install the Ansible Role inside of the project:</span></p><a id="t.4f147494fe335782325ec9416b2aa2ab65c85498"></a><a id="t.12"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8"># </span><span class="c4">ansible-galaxy install dymurray.memcached_operator_role -p ./roles</span></p><p class="c0"><span class="c4"># ls roles/</span></p><p class="c0"><span class="c4">dymurray.memcached_operator_role Memcached</span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4"></span></p><h2 class="c14" id="h.b4w67nho163d"><span class="c10">Removing the unneeded Role</span></h2><p class="c5"><span class="c11">Since we&rsquo;ll be reusing the logic from &lsquo;dymurray.memcached_operator_role&rsquo;, we can safely delete the placeholder Role generated by the the &lsquo;operator-sdk new&rsquo; command we ran previously.</span></p><a id="t.2f2b11879993a5f7cae18ef446caef2d6996b7f3"></a><a id="t.13"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8"># </span><span class="c4">rm -rf ./roles/${USER}memcached</span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4"></span></p><p class="c0"><span class="c11 c20">Correcting the Watches File</span></p><p class="c5"><span class="c4">By default, the memcached-operator watches Memcached resource events as shown in watches.yaml and executes Ansible Role Memcached.</span></p><p class="c5"><span class="c11">Since we have swapped out the original Role for one from Ansible Galaxy, lets change the Watches file to reflect this: </span></p><a id="t.4b068fe1f2b934b32789a202ea7fd9bac082379d"></a><a id="t.14"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c4">version: v1alpha1</span></p><p class="c0"><span class="c4">&nbsp;group: cache.example.com</span></p><p class="c0"><span class="c4">&nbsp;kind: Memcached</span></p><p class="c0"><span class="c11">&nbsp;role: /opt/ansible/roles/dymurray.memcached_operator_role</span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4"></span></p><h2 class="c14" id="h.qe2ilhrd9tgr"><span class="c10">Build and run the Operator</span></h2><p class="c5"><span class="c11">Before running the Operator, Kubernetes needs to know about the new custom resource definition the Operator will be watching, by running the following command </span><span class="c2">as cluster-admin</span><span class="c11">:</span></p><a id="t.0458ac9f7e820308ca8e7be12d7510cea9ed5fd5"></a><a id="t.15"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8"># </span><span class="c4">oc create -f deploy/crds/cache.example.com_${USER}memcacheds_crd.yaml</span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4"></span></p><p class="c0"><span class="c4">$ By running this command, we are creating a new resource type, memcached, on the cluster. We will give our Operator work to do by creating and modifying resources of this type.</span></p><p class="c0"><span class="c4">But before regular users will be able to create a CR of the type of your CRD we need to allow them to do so by creating the following file(change user01 to your user):</span></p><p class="c0"><span class="c11">&nbsp;</span></p><a id="t.401ffd606a3ddd1acc271fdbb4f78be8133a9ba9"></a><a id="t.16"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c21 c8">kind: ClusterRole</span></p><p class="c0"><span class="c21 c8">apiVersion: rbac.authorization.k8s.io/v1</span></p><p class="c0"><span class="c21 c8">metadata:</span></p><p class="c0"><span class="c21 c8">&nbsp; name: aggregate-user01-memcached-admin-edit</span></p><p class="c0"><span class="c21 c8">&nbsp; labels:</span></p><p class="c0"><span class="c21 c8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rbac.authorization.k8s.io/aggregate-to-admin: &quot;true&quot;</span></p><p class="c0"><span class="c21 c8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rbac.authorization.k8s.io/aggregate-to-edit: &quot;true&quot;</span></p><p class="c0"><span class="c8 c21">rules:</span></p><p class="c0"><span class="c21 c8">- apiGroups: [&quot;cache.example.com&quot;]</span></p><p class="c0"><span class="c21 c8">&nbsp; resources: [&quot;user01memcacheds&quot;]</span></p><p class="c0"><span class="c21 c8">&nbsp; verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;, &quot;create&quot;, &quot;update&quot;, &quot;patch&quot;, &quot;delete&quot;, &quot;deletecollection&quot;]</span></p><p class="c0"><span class="c21 c8">---</span></p><p class="c0"><span class="c21 c8">kind: ClusterRole</span></p><p class="c0"><span class="c21 c8">apiVersion: rbac.authorization.k8s.io/v1</span></p><p class="c0"><span class="c21 c8">metadata:</span></p><p class="c0"><span class="c21 c8">&nbsp; name: aggregate-user01-memcached-view</span></p><p class="c0"><span class="c21 c8">&nbsp; labels:</span></p><p class="c0"><span class="c21 c8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rbac.authorization.k8s.io/aggregate-to-view: &quot;true&quot;</span></p><p class="c0"><span class="c21 c8">rules:</span></p><p class="c0"><span class="c21 c8">- apiGroups: [&quot;cache.example.com&quot;]</span></p><p class="c0"><span class="c21 c8">&nbsp; resources: [&quot;user01memcacheds&quot;]</span></p><p class="c0"><span class="c21 c8">&nbsp; verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;]</span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4"></span></p><h2 class="c14" id="h.nuoky3eutn7p"><span class="c10">Ways to Run an Operator</span></h2><p class="c5"><span class="c4">Once the CRD is registered, there are two ways to run the Operator:</span></p><ul class="c51 lst-kix_hvp1svlmjhub-0 start"><li class="c5 c18"><span class="c4">As a pod inside an Openshift cluster</span></li><li class="c5 c18"><span class="c4">As a go program outside the cluster using operator-sdk</span></li></ul><p class="c5"><span class="c4">For the sake of this tutorial, we will run the Operator as a pod inside of a Openshift Cluster. If you are interested in learning more about running the Operator using operator-sdk.</span></p><h2 class="c14" id="h.yq39yrge7qj7"><span class="c10">Building</span></h2><p class="c5"><span class="c4">Running as a pod inside a Openshift cluster is preferred for production use.</span></p><p class="c5"><span class="c11">Let&rsquo;s build the memcached-operator image:</span></p><a id="t.558770455e84a3e6893a318134b1b969e52dd149"></a><a id="t.17"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8"># </span><span class="c4">operator-sdk build ${USER}-memcached-operator:v0.0.1 --image-builder buildah</span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4"></span></p><p class="c0"><span class="c4">$ As you can see I am using &ldquo;buildah&rdquo; as a container builder so we need to make sure the buildah packages and the podman package are already installed.</span></p><h2 class="c14" id="h.yhh0g8gz0m4r"><span class="c10">Modifying the Operator deploy manifest</span></h2><p class="c5"><span class="c4">Kubernetes deployment manifests are generated by &lsquo;operator-sdk new&rsquo; in deploy/operator.yaml. We need to make a few changes to this file.</span></p><ul class="c51 lst-kix_ov9o0uu2i9mh-0 start"><li class="c5 c18"><span class="c4">image placeholder &#39;REPLACE_IMAGE&#39; should be set to the previously-built image.</span></li><li class="c5 c18"><span class="c11">imagePullPolicy from &#39;Always&#39; to &#39;Never&#39; since we aren&#39;t pushing our image to a registry.</span></li></ul><a id="t.031ed9d196f54afaf46571508bfa81937d0fda01"></a><a id="t.18"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c4">apiVersion: apps/v1</span></p><p class="c0"><span class="c4">kind: Deployment</span></p><p class="c0"><span class="c4">metadata:</span></p><p class="c0"><span class="c4">&nbsp;name: ${USER}-memcached-operator</span></p><p class="c0"><span class="c4">spec:</span></p><p class="c0"><span class="c4"># [...]</span></p><p class="c0"><span class="c4">&nbsp; &nbsp; &nbsp;containers:</span></p><p class="c0"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp;- name: ${USER}-memcached-operator</span></p><p class="c0"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Replace &#39;REPLACE_IMAGE&#39; with the built image name</span></p><p class="c0"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;image: REPLACE_IMAGE</span></p><p class="c0"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Replace &#39;Always&#39; with &#39;Never&#39;</span></p><p class="c0"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;imagePullPolicy: Always</span></p><p class="c0"><span class="c11"># [...]</span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4"></span></p><p class="c0 c12"><span class="c4"></span></p><p class="c5"><span class="c11">The commands below will change the Deployment &lsquo;image&rsquo; and &lsquo;imagePullPolicy&rsquo; respectively.</span></p><a id="t.c30892d0969c483ceea76da06373b4e6fa2d9c84"></a><a id="t.19"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8"># </span><span class="c4">sed -i &#39;s|{{ REPLACE_IMAGE }}|${USER}-memcached-operator:v0.0.1|g&#39; deploy/operator.yaml</span></p><p class="c0"><span class="c4"># sed -i &quot;s|{{ pull_policy\|default(&#39;Always&#39;) }}|Never|g&quot; deploy/operator.yaml</span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4"></span></p><p class="c0"><span class="c11">$ </span><span class="c21 c42">Creating the Operator from deploy manifests</span></p><p class="c5"><span class="c4">Now, we are ready to deploy the memcached-operator:</span></p><p class="c0"><span class="c11">Create Service Account for Operator to run as</span></p><a id="t.dd02e03f9636eacb9ef59df17acbd93c02164da9"></a><a id="t.20"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8">#</span><span class="c4">&nbsp;oc create -f deploy/service_account.yaml</span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4"></span></p><p class="c0"><span class="c11">Create OpenShift Role specifying Operator Permissions </span><span class="c2">as cluster-admin</span></p><a id="t.b9d7c900b95995dab1a59b2faaefb090e11f9915"></a><a id="t.21"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8">#</span><span class="c4">&nbsp;oc create -f deploy/role.yaml</span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4"></span></p><p class="c0"><span class="c11">Create OpenShift Role Binding assigning Permissions to Service Account </span><span class="c2">as cluster-admin</span></p><a id="t.d51c65460e9a18ca108eb4f7dfb09ef9a6acbf42"></a><a id="t.22"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8">#</span><span class="c4">&nbsp;oc create -f deploy/role_binding.yaml</span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4"></span></p><p class="c0"><span class="c11">Create Operator Deployment Object</span></p><a id="t.38fcc5d56d27920831214297008b31f37b8c4d8f"></a><a id="t.23"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8">#</span><span class="c4">&nbsp;oc create -f deploy/operator.yaml</span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4"></span></p><p class="c0"><span class="c11">Add a serviceaccount permissions:</span></p><a id="t.74493715c538186c5eb218c6374beafa3d9517cb"></a><a id="t.24"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8">#</span><span class="c4">&nbsp;oc adm policy add-role-to-user admin system:serviceaccount:project-user03:user03memcached-operator</span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4"></span></p><p class="c5"><span class="c11">Verify that the memcached-operator is running:</span></p><a id="t.ced5a5cf93cbcef159aa3ba79527e96786d60922"></a><a id="t.25"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8">#</span><span class="c4">&nbsp;oc get deployment</span></p><p class="c0"><span class="c4">NAME &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DESIRED CURRENT UP-TO-DATE AVAILABLE AGE</span></p><p class="c0"><span class="c4">memcached-operator &nbsp;1 &nbsp; &nbsp; &nbsp; 1 &nbsp; &nbsp; &nbsp; 1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 &nbsp; &nbsp; &nbsp; &nbsp; 1m</span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4"></span></p><p class="c0"><span class="c11">$ </span><span class="c20 c11">Using the Operator</span></p><p class="c5"><span class="c4">Now that we have deployed our Operator, let&rsquo;s create a CR and deploy an instance of memcached.</span></p><p class="c5"><span class="c11">There is a sample CR in the scaffolding created as part of the Operator SDK:</span></p><a id="t.0a5b75075c99d22a3708dcb416d6557cac57824f"></a><a id="t.26"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c4">apiVersion: cache.example.com/v1alpha1</span></p><p class="c0"><span class="c4">kind: ${USER}Memcached</span></p><p class="c0"><span class="c4">metadata:</span></p><p class="c0"><span class="c4">&nbsp;name: ${USER}-example-memcached</span></p><p class="c0"><span class="c4">Spec:</span></p><p class="c0"><span class="c4">&nbsp;# Add fields here</span></p><p class="c0"><span class="c11">&nbsp;size: 3</span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4"></span></p><p class="c5"><span class="c11">Let&rsquo;s go ahead and apply this in our Tutorial project to deploy 3 memcached pods, using our Operator:</span></p><a id="t.ee032fa230540178f7357291ca228ce849951c5d"></a><a id="t.27"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c4"># deploy/crds/cache_v1alpha1_memcached_cr.yaml</span></p><p class="c0"><span class="c4">apiVersion: cache.example.com/v1alpha1</span></p><p class="c0"><span class="c4">kind: ${USER}Memcached</span></p><p class="c0"><span class="c4">metadata:</span></p><p class="c0"><span class="c4">&nbsp;name: example-memcached</span></p><p class="c0"><span class="c4">spec:</span></p><p class="c0"><span class="c11">&nbsp;size: 3</span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4"></span></p><p class="c5"><span class="c4">Now run the the &ldquo;oc create&rdquo; command</span></p><p class="c0 c12"><span class="c3"></span></p><a id="t.dd271c392cb23248858b465099e547306fcbe9df"></a><a id="t.28"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8">#</span><span class="c4">&nbsp;oc create -f deploy/crds/cache_v1alpha1_memcached_cr.yaml</span></p></td></tr></tbody></table><p class="c0"><span class="c4">Ensure that the memcached-operator creates the deployment for the CR:</span></p><p class="c0 c12"><span class="c3"></span></p><a id="t.43796bb72bf00c3d37c4e60ddfeb7f46264bb381"></a><a id="t.29"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8">#</span><span class="c4">oc get deployment</span></p><p class="c0"><span class="c4">NAME &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DESIRED CURRENT UP-TO-DATE AVAILABLE AGE</span></p><p class="c0"><span class="c4">${USER}memcached-operator &nbsp; 1 &nbsp; &nbsp; &nbsp; 1 &nbsp; &nbsp; &nbsp; 1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 &nbsp; &nbsp; &nbsp; &nbsp; 2m</span></p><p class="c0"><span class="c4">example-memcached &nbsp; &nbsp;3 &nbsp; &nbsp; &nbsp; 3 &nbsp; &nbsp; &nbsp; 3 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3 &nbsp; &nbsp; &nbsp; &nbsp; 1m</span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4"></span></p><h1 class="c43" id="h.igbc6hsp1u3h"><span class="c21 c42">Custom Variables</span></h1><p class="c5"><span class="c11">To pass &lsquo;extra vars&rsquo; to the Playbooks/Roles being run by the Operator, you can embed key-value pairs in the &lsquo;spec&rsquo; section of the </span><span class="c11 c24">Custom Resource (CR)</span><span class="c4">.</span></p><p class="c5"><span class="c11">This is equivalent to how</span><span class="c11"><a class="c6" href="https://www.google.com/url?q=https://docs.ansible.com/ansible/latest/user_guide/playbooks_variables.html%23passing-variables-on-the-command-line&amp;sa=D&amp;ust=1587642006418000">&nbsp;</a></span><span class="c11 c33"><a class="c6" href="https://www.google.com/url?q=https://docs.ansible.com/ansible/latest/user_guide/playbooks_variables.html%23passing-variables-on-the-command-line&amp;sa=D&amp;ust=1587642006418000">&mdash; extra-vars</a></span><span class="c11">&nbsp;can be passed into the </span><span class="c11 c24">ansible-playbook</span><span class="c4">&nbsp;command.</span></p><p class="c5"><span class="c4">The CR snippet below shows two &lsquo;extra vars&rsquo; (message and newParamater) being passed in via spec. Passing &#39;extra vars&#39; through the CR allows for customization of Ansible logic based on the contents of each CR instance.</span></p><p class="c0"><span class="c4"># Sample CR definition where some</span></p><p class="c0"><span class="c4"># &#39;extra vars&#39; are passed via the spec</span></p><p class="c0 c12"><span class="c3"></span></p><a id="t.946b44c3621c1d90752511809314fa534be97c4f"></a><a id="t.30"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c4">apiVersion: &quot;app.example.com/v1alpha1&quot;</span></p><p class="c0"><span class="c4">kind: &quot;Database&quot;</span></p><p class="c0"><span class="c4">metadata:</span></p><p class="c0"><span class="c4">&nbsp;name: &quot;example&quot;</span></p><p class="c0"><span class="c4">spec:</span></p><p class="c0"><span class="c4">&nbsp;message: &quot;Hello world 2&quot;</span></p><p class="c0"><span class="c11">&nbsp;newParameter: &quot;newParam&quot;</span></p></td></tr></tbody></table><h1 class="c43" id="h.ydm6ubpp2c2k"><span class="c21 c42">Accessing CR Fields</span></h1><p class="c5"><span class="c4">Now that you&rsquo;ve passed &lsquo;extra vars&rsquo; to your Playbook through the CR spec, we need to read them from the Ansible logic that makes up your Operator.</span></p><p class="c5"><span class="c11">Variables passed in through the CR spec are made available at the top-level to be read from Jinja templates. For the CR example above, we could read the vars &lsquo;message&rsquo; and &lsquo;newParameter&rsquo; from a Playbook like so:</span></p><a id="t.e1d193f4dcaf98a89c3514db2a0be3fc9721d20a"></a><a id="t.31"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c4">- debug:</span></p><p class="c0"><span class="c4">&nbsp; &nbsp;msg: &quot;message value from CR spec: {{ message }}&quot;</span></p><p class="c0 c12"><span class="c4"></span></p><p class="c0"><span class="c4">- debug:</span></p><p class="c0"><span class="c11">&nbsp; &nbsp;msg: &quot;newParameter value from CR spec: {{ new_parameter }}&quot;</span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4"></span></p><p class="c5"><span class="c4">Did you notice anything strange about the snippet above? The &lsquo;newParameter&rsquo; variable that we set on our CR spec was accessed as &lsquo;new_parameter&rsquo;. Keep this automatic conversion from camelCase to snake_case in mind, as it will happen to all &lsquo;extra vars&rsquo; passed into the CR spec.</span></p><p class="c5 c12"><span class="c4"></span></p><h2 class="c14" id="h.6u0ju6nxgumb"><span class="c10">Removing Memcached from the cluster</span></h2><p class="c41"><span class="c11">First, delete the &#39;memcached&#39; CR, which will remove the 4 Memcached pods and the associated deployment.</span></p><a id="t.e091c467f13281c9ad4f5553c9909553d5383533"></a><a id="t.32"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8"># </span><span class="c11">oc delete -f deploy/crds/cache_v1alpha1_memcached_cr.yaml</span></p></td></tr></tbody></table><p class="c5 c12"><span class="c4"></span></p><p class="c5"><span class="c11">Now let&#39;s look at the pods </span></p><a id="t.3aa76c08ecd4a30e8b2bc98a2015387623ca0be2"></a><a id="t.33"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8"># </span><span class="c4">oc get pods</span></p></td></tr></tbody></table><p class="c5 c12"><span class="c4"></span></p><p class="c5 c12"><span class="c4"></span></p><p class="c5 c12"><span class="c4"></span></p><p class="c5"><span class="c11">Then, delete the memcached-operator deployment.</span></p><a id="t.bb6f2d39da55f119dabf15b9e872fddd3de30cdc"></a><a id="t.34"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8"># </span><span class="c11">oc delete -f deploy/operator.yaml</span></p></td></tr></tbody></table><p class="c5"><span class="c11">Finally, verify that the memcached-operator is no longer running.</span></p><a id="t.6e1940bdbd80a0b50c226b7ac3028a9a7fb89a2a"></a><a id="t.35"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8"># </span><span class="c11">oc get deployment</span></p></td></tr></tbody></table><p class="c5 c12"><span class="c4"></span></p><p class="c5 c12"><span class="c4"></span></p><hr style="page-break-before:always;display:none;"><h1 class="c5 c36 c60" id="h.ud7t1hdsbu20"><span class="c11 c19"></span></h1><h1 class="c5 c36" id="h.2l4d50rqt5t4"><span class="c19 c11">Head First </span></h1><h2 class="c5 c36" id="h.pk4t96xljry"><span class="c21 c27">Task 1</span></h2><p class="c17"><span class="c2 c53 c32 c58">Create an operator to deploy our hello-go Application </span></p><p class="c12 c17"><span class="c4"></span></p><h2 class="c5 c36" id="h.ir0rcaspqie5"><span class="c21 c27">Task 2 (Optional)</span></h2><p class="c17"><span class="c4">Update our hello-go code to use mariadb database and update our operator with mariadb dependency </span></p><p class="c17 c12"><span class="c4"></span></p><p class="c5 c12"><span class="c4"></span></p><p class="c5 c12"><span class="c4"></span></p><hr style="page-break-before:always;display:none;"><h2 class="c34" id="h.g3i43ntz9cec"><span class="c21 c30"></span></h2><h2 class="c36 c40" id="h.93izf6f06j40"><span class="c21 c30">UBI Container with operator-sdk</span></h2><p class="c0 c12"><span class="c4"></span></p><p class="c0"><span class="c11">Create a base directory for our container :</span></p><a id="t.9295222f798b802648f80b2d79318263b6036c23"></a><a id="t.36"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8"># </span><span class="c11">mkdir ubi7-operator-sdk</span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4"></span></p><p class="c0"><span class="c11">Now build a small bash script with a loop</span></p><a id="t.f9609bec214563bffb2253b010b72f9cd051a908"></a><a id="t.37"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8"># </span><span class="c4">cat &gt; run.sh &lt;&lt; EOF</span></p><p class="c0"><span class="c4">#!/bin/bash</span></p><p class="c0"><span class="c4">tail -f /dev/null</span></p><p class="c0"><span class="c4">EOF</span></p><p class="c0"><span class="c11"># chmod a+x run.sh</span></p></td></tr></tbody></table><p class="c5 c12"><span class="c4"></span></p><p class="c5"><span class="c11">Copy the operator-sdk to the current directory</span></p><a id="t.15ad3d327f7b462811501d2a8b40d5f022f9c00b"></a><a id="t.38"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8"># </span><span class="c11">cp ${HOME}/bin/operator-sdk .</span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4"></span></p><p class="c0"><span class="c11">And Now create the Dockerfile :</span></p><a id="t.37cfc332806e17dda12b3e5918b528a34cf64f1b"></a><a id="t.39"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8"># </span><span class="c4">cat &gt; Dockerfile &lt;&lt; EOF</span></p><p class="c0"><span class="c4">FROM registry.infra.local:5000/ubi8/ubi-minimal</span></p><p class="c0"><span class="c4">MAINTAINER me@working.me</span></p><p class="c0 c12"><span class="c4"></span></p><p class="c0"><span class="c4">USER root</span></p><p class="c0"><span class="c4">WORKDIR /opt/app-root/</span></p><p class="c0 c12"><span class="c4"></span></p><p class="c0"><span class="c4">COPY run.sh .</span></p><p class="c0"><span class="c4">COPY operator-sdk /usr/bin/</span></p><p class="c0 c12"><span class="c4"></span></p><p class="c0"><span class="c4">CMD [&quot;/opt/app-root/run.sh&quot;]</span></p><p class="c0"><span class="c4">EOF</span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4"></span></p><p class="c0"><span class="c11">Run the build :</span></p><a id="t.e74b57fe7dbfe360adabde2697855843565cc7a8"></a><a id="t.40"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8"># </span><span class="c11">buildah bud -f Dockerfile -t ubi7/ubi-operator-sdk .</span></p></td></tr></tbody></table><p class="c0"><span class="c11">Now we can use the operator-sdk from the container :</span></p><a id="t.da2710ea02241ac75003de25be93d0f34014198b"></a><a id="t.41"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8"># </span><span class="c11">podman run -d -v ${HOME}/ubi7-operator-sdk:/opt/app-root/src:Z,ro localhost/ubi7/ubi-operator-sdk</span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4"></span></p><p class="c0"><span class="c11">Now login to the pod :</span></p><a id="t.725aeefd852bb711e62a83b4a29f44106f19f9da"></a><a id="t.42"></a><table class="c9"><tbody><tr class="c13"><td class="c1" colspan="1" rowspan="1"><p class="c0"><span class="c8"># </span><span class="c11">podman exec -it operator-sdk /bin/bash</span></p></td></tr></tbody></table><p class="c0 c12"><span class="c4"></span></p><p class="c0"><span class="c4">You are good to go</span></p><p class="c0 c12"><span class="c4"></span></p><div><p class="c37 c12"><span class="c21 c49"></span></p><p class="c37"><span class="c48">Footer Contents</span><span class="c63">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></div></body></html>